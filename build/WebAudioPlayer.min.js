var WebAudioPlayer=function(){function n(n,t){window.AudioContext=window.AudioContext||window.webkitAudioContext,v=new AudioContext,p=n,A=t,m=0,w=new Audio(g+p[m]),e(),o()}function e(){w.addEventListener("loadstart",function(){var n=v.createMediaElementSource(w);n.connect(v.destination),n.connect(s)},!1),w.addEventListener("loadedmetadata",function(){D=w.currentTime,x=w.duration,console.log(D+" / "+x),console.log(w.volume)},!1),w.addEventListener("timeupdate",function(){D=w.currentTime,console.log(D+" / "+x)}),w.addEventListener("ended",function(){c()},!1)}function t(){w=new Audio(g+p[m]),e(),o()}function o(){s=v.createAnalyser()}function i(){var n=new Uint8Array(256);return s.getByteTimeDomainData(n),n}function a(){var n=new Uint8Array(256);return s.getByteFrequencyData(n),n}function u(){w.ended||(w.pause(),w.currentTime=0)}function r(){w.play()}function c(){m++,m>p.length-1&&(m=A?0:p.length-1),u(),t(),w.play()}function d(){m--,0>m&&(m=A?p.length-1:0),u(),t(),w.play()}function l(){w.pause()}function s(){return s}function f(){var n;return n=w.paused?!1:!0}function y(n){g=n}var v,w,s,A,g,m,p,D,x;return{init:n,sourceConnect:e,createAudio:t,createAnalyser:o,getTimeDomainData:i,getFrequencyData:a,stop:u,play:r,next:c,prev:d,pause:l,analyser:s,isPlaying:f,setSoundFilePath:y}};