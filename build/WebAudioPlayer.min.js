var WebAudioPlayer=function(){function n(n,t){window.AudioContext=window.AudioContext||window.webkitAudioContext,w=new AudioContext,m=n,g=t,v=0,A=new Audio(p+m[v]),e(),o()}function e(){A.addEventListener("loadstart",function(){var n=w.createMediaElementSource(A);n.connect(w.destination),n.connect(f)},!1),A.addEventListener("ended",function(){console.log("ended"),console.log(c),c()},!1)}function t(){A=new Audio(p+m[v]),e(),o()}function o(){f=w.createAnalyser()}function i(){var n=new Uint8Array(256);return f.getByteTimeDomainData(n),n}function a(){var n=new Uint8Array(256);return f.getByteFrequencyData(n),n}function u(){A.ended||(A.pause(),A.currentTime=0)}function r(){A.play()}function c(){v++,v>m.length-1&&(v=g?0:m.length-1),u(),t(),A.play()}function d(){v--,0>v&&(v=g?m.length-1:0),u(),t(),A.play()}function l(){A.pause()}function f(){return f}function s(){var n;return n=A.paused?!1:!0}function y(n){p=n}var w,A,f,g,p,v,m;return{init:n,sourceConnect:e,createAudio:t,createAnalyser:o,getTimeDomainData:i,getFrequencyData:a,stop:u,play:r,next:c,prev:d,pause:l,analyser:f,isPlaying:s,setSoundFilePath:y}};